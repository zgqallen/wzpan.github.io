<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>入门 | HaHack</title>
  <meta name="author" content="Joseph Pan">
  
  <meta name="description" content="参考资料

《Elisp 入门》
《Emacs Lisp 15 分钟入门》

Hello World
1(message &quot;hello world&quot;)
首先切换到 *scratch* 缓冲里，如果当前模式不是 lisp-interaction-mode，用 M-x lisp-interaction-">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="入门"/>
  <meta property="og:site_name" content="HaHack"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/images/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="HaHack" type="application/atom+xml">
  
  <link rel="stylesheet" href="/dist/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/bootstrap-responsive.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/font-awesome.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/style.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/highlight.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/sidenav.min.css" media="screen" type="text/css">  
  <link rel="stylesheet" href="/dist/responsive.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/bubble.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/google-fonts.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/nprogress.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/comment.min.css" media="screen" type="text/css">
  
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <!--[if lte IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

<!--  -->
<!--     <link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow|PT+Sans:400,400italic,700,700italic|Droid+Serif:400,400italic' rel='stylesheet' type='text/css'> -->
<!--     <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'> -->
<!--  -->
  
<script src="/dist/jquery-2.0.3.min.js"></script>


    <script src="/dist/videoGFW.min.js"></script>
	
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-41569408-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';

var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

	


    <link rel="stylesheet" href="/dist/highlight-default.min.css" media="screen" type="text/css">
    
    <script src="/dist/comment.min.js"></script>
    <script src="/dist/marked.min.js"></script>
    
    <script src="/dist/highlight.min.js"></script>
    <script src="/dist/timeago.min.js"></script>
	<script src="/dist/spin.min.js"></script>


</head>


<body data-spy="scroll" data-target=".toc">  
  <header id="header" class="inner"><div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
            <a data-pjax class="brand" href="/">HaHack</a>
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="nav-collapse collapse">
            <ul class="nav">				
			    
				   <li><a data-pjax href="/archive" title="所有文章归档"><i class="fa fa-archive"></i>Archive</a></li>
    			
				   <li><a data-pjax href="/categories" title="所有文章分类"><i class="fa fa-folder"></i>Categories</a></li>
    			
				   <li><a data-pjax href="/tags" title="所有文章标签"><i class="fa fa-tags"></i>Tags</a></li>
    			
				
				<li class="divider-vertical"></li>
			   	<li><a data-pjax href="/wiki" title="我的笔记库"><i class="fa fa-tasks"></i>wiki</a></li>				   
				
            </ul>			
			<ul class="nav navright">
				<li class="dropdown works">
				<a data-pjax href="#" title="作品集" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-th-large"></i>Works <b class="caret"></b></a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">				
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://github.com/wzpan/wukong-robot" title="wukong-robot 是一个简单、灵活、优雅的中文语音对话机器人。"><i class="fab fa-github"></i>wukong-robot</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://github.com/dingdang-robot/dingdang-robot" title="叮当是一款可以工作在 Raspberry Pi 上的中文语音对话机器人/智能音箱项目。"><i class="fab fa-github"></i>dingdang-robot</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://github.com/wzpan/comment-js" title="纯JS实现的静态站点评论系统，使用 Github/OSChina 作为 backend。"><i class="fab fa-github"></i>comment.js</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://github.com/wzpan/qtevm" title="首个完整的 C++ 开源实现，能同时放大动作变化和颜色变化"><i class="fab fa-github"></i>QtEVM</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/wzpan/wzpan.github.io/wiki/hexo-series" title="为 Hexo 写的一系列主题/工具/插件"><i class="fab fa-github"></i>hexo-series</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/scnu/scnuthesis" title="符合华南师范大学硕士/博士学位论文格式要求的LaTeX模板。"><i class="fab fa-github"></i>SCNUThesis</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/wzpan/wzpan.github.io/wiki/slides" title="一些幻灯片作品"><i class="fab fa-github"></i>Slides</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://hahack.com/codes/fcevm/" title="硕士毕业论文"><i class="fab fa-github"></i>Dissertation</a></li>
				
                </ul>                
				</li>
                <li class="dropdown works">
				<a data-pjax href="#" title="课程" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-video"></i>Courses <b class="caret"></b></a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://ke.qq.com/course/list/python%20next%20潘伟洲" title="Python 从入门到实践系列"><i class="fa fa-video"></i>Python</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://ke.qq.com/course/326820" title="微信小游戏入门与实战"><i class="fa fa-video"></i>minigame</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://ke.qq.com/course/350627" title="使用Cocos Creator开发微信小游戏《2048》"><i class="fa fa-video"></i>2048</a></li>
				
                </ul>                
				</li>                
				<li class="dropdown">
				<a data-pjax href="#" title="订阅本站" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-rss"></i>Subscribe <b class="caret"></b></a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" href="/atom.xml" title="使用 RSS 阅读器订阅 HaHack"><i class="fa fa-rss-square"></i>RSS</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" href="/wechat.html" title="订阅 HaHack 的公众平台"><i class="fa fa-qrcode"></i>WeChat</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" href="http://toutiao.io/u/147640" title=""><i class="fa fa-align-justify"></i>Toutiao</a></li>
				
                	        </ul>
				</li>
				
				<li><a data-pjax href="/about" title="关于我"><i class="fa fa-user"></i>About</a></li>				   				
   					  
            </ul>
            </div> <!-- nav-collapse collapse -->
        </div> <!-- container -->
     </div> <!-- navbar-inner -->
</div> <!-- navbar navbar-inverse -->
</header>
  <div class="container" id="container">
  	<div class="content">
    	 

	
		<div class="page-header">		
			<h1> 入门</h1>
		</div>    
	



<div class="row-fluid wiki">
	<!-- span -->
    
        <div class="span3 toc"></div>
        <div class="span9 note">
    

	

		<!-- content -->
		<h2 id="参考资料">参考资料</h2>
<ul>
<li>《<a href="http://www.newsmth.net/nForum/#!article/Emacs/58338" target="_blank" rel="external">Elisp 入门</a>》</li>
<li>《<a href="http://blog.jobbole.com/44932/" target="_blank" rel="external">Emacs Lisp 15 分钟入门</a>》</li>
</ul>
<h2 id="hello-world">Hello World</h2>
<p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="list">(<span class="title">message</span> <span class="string">"hello world"</span>)</span></div></pre></td></tr></table></figure></p>
<p>首先切换到 <code>*scratch*</code> 缓冲里，如果当前模式不是 lisp-interaction-mode，用 <code>M-x lisp-interaction-mode</code> 先切换到 lisp-interaction-mode。 后输入这一语句。在尾右括号后，按 <code>C-j</code> 键。如果 Minibuffer 里显示 hello world，光标前一行也显示“hello world”，那说明你的操作没有问题。</p>
<p><div class="alert alert-success"><i class="fa fa-lightbulb-o"></i>  <p>注： elisp 里的一个完整表达式, 除了简单数据类型（如数字，向量）, 都是用括号括起来，称为一个 S-表达式。 elisp 解释器执行一个 S-表达式 除了前一种方法之外，还可以用 <code>C-x C-e</code>。它们的区别是, <code>C-x C-e</code> 是一个全局按键绑定，几乎可以在所有地方都能用。它会将运行返回值显示在 Minibuffer 里。这里需要强调一个概念是返回值和作用是不同的。比如前面 message 函数它的作用是在 Minibuffer 里显示一个字符串，但是它的返回值是“hello world”字符串。</p>
</div></p>
<h2 id="15分钟入门">15分钟入门</h2>
<p><figure class="highlight elisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div></pre></td><td class="code"><pre><div class="line">;; This gives an introduction <span class="keyword">to</span> Emacs Lisp <span class="keyword">in</span> <span class="number">15</span> minutes (v0<span class="number">.2</span>d)</div><div class="line">;;</div><div class="line">;; 英文原作者: Bastien / @bzg2 / http://bzg.fr</div><div class="line">;; 中文翻译: iamxuxiao</div><div class="line">;; </div><div class="line">;; </div><div class="line">;; 如何安装 Emacs </div><div class="line">;; </div><div class="line">;; Debian: apt-get install emacs (<span class="keyword">or</span> see your distro instructions)</div><div class="line">;; MacOSX: http://emacsformacosx.com/emacs-builds/Emacs-<span class="number">24.3</span>-universal-<span class="number">10.6</span><span class="number">.8</span>.dmg</div><div class="line">;; Windows: http://ftp.gnu.org/gnu/windows/emacs/emacs-<span class="number">24.3</span>-bin-i386.zip</div><div class="line">;;</div><div class="line">;; More general information can be found at:</div><div class="line">;; http://www.gnu.org/software/emacs/#Obtaining</div><div class="line">;; 免责声明：</div><div class="line">;;</div><div class="line">;; Going through this tutorial won<span class="attribute">'t</span> damage your computer unless</div><div class="line">;; you get so angry that you throw it <span class="keyword">on</span> the floor. <span class="keyword">In</span> that <span class="keyword">case</span>,</div><div class="line">;; I hereby decline any responsability. Have fun!</div><div class="line"></div><div class="line">== 启动Emacs, 缓冲区和工作模式==</div><div class="line">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</div><div class="line">;; </div><div class="line">;; 第一步首先启动Emacs: (在windows中可以双击emacs图标，在Linux中可以输入% emacs & )，</div><div class="line">;; 然后在键盘上键入q 跳过系统欢迎的信息，</div><div class="line">;; 先观察在Emacs屏幕的底部，会给出一堆关于当前的工作情况的信息，其中灰色的一行叫做状态行，</div><div class="line">;; 在其中你会发现 *scratch* 的字样，这表示你当前的缓冲区(<span class="keyword">buffer</span>)的名字。</div><div class="line">;; 缓冲区也叫做工作区，在Emacs中打开一个文件，实际只是在Emacs中构造该文件的一个副本，放到缓冲区中，</div><div class="line">;; 在Emacs中对该文件的编辑也是针对该副本的编辑，唯有保存改动时，Emacs才会把缓冲区中的内容在复制到原文件中去。</div><div class="line">;; 状态行下面的那行，叫做辅助输入区(minibuffer),该minibuffer用于显示计算结果，以及和用户做交互。</div><div class="line">;;</div><div class="line">;; </div><div class="line">;; 如何切换Emacs的工作模式 </div><div class="line">;; Emacs有各种各样功能各异的模式，工作模式的含义其实就是Emacs对当前的文本编辑工作</div><div class="line">;; 更加的敏感，比如高亮和缩进，并且支持一些特殊的命令。</div><div class="line">;; 为了实验本教程中的lisp命令，我们要让Emacs工作在lisp-interaction-mode工作模式下，</div><div class="line">;; 这个模式可以让我们在缓冲区中和Emacs进行互动，并且直接执行Lisp命令,得到结果。</div><div class="line">;; 进入lisp-interaction-mode的方法： 把光标移动到辅助输入区，键入M-x lisp-interaction-mode </div><div class="line">;; 然后回车。</div><div class="line"></div><div class="line">== 表达式，变量和函数 ==</div><div class="line"></div><div class="line">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</div><div class="line">;;</div><div class="line">;; 冒号在Lisp中表示注释</div><div class="line">;; 在Elisp中做运算，调用函数的最简单的方式是</div><div class="line">;; (<span class="keyword">function</span> arg1 arg2) </div><div class="line">;; 这相当于通常的<span class="keyword">function</span>(arg1,arg2)，下面的表达式，对两个数字进行加法运算</div><div class="line">(+ <span class="number">2</span> <span class="number">2</span>)</div><div class="line"></div><div class="line">;; Elisp中表达式可以通过括号来嵌套</div><div class="line">(+ <span class="number">2</span> (+ <span class="number">1</span> <span class="number">1</span>))</div><div class="line"></div><div class="line">;; 在lisp-interaction-mode模式中，我们可以直接计算一个表达式,计算的方法是</div><div class="line">(+ <span class="number">3</span> (+ <span class="number">1</span> <span class="number">2</span>))</div><div class="line">;; ^ 把光标放在这里，并且键入Ctrl-j (之后将简写成C-j)</div><div class="line">;; C-j是一个快捷命令，在后台，该快捷键将调用求值命令，并且把计算的结果</div><div class="line">;; 插入到当前的缓冲区中</div><div class="line"></div><div class="line">;; 如果不希望Emacs在缓冲区中插入计算结果，我们还可以在表达式的末尾使用C-x C-e组合键</div><div class="line">;; C-x C-e的意思是: 先按下Ctrl-x 再按下Ctrl-e </div><div class="line">;; 这个命令会让Emacs在辅助缓冲区，也就是Emacs窗口的最底部那行显示计算结果</div><div class="line"></div><div class="line">;; ELisp中的赋值函数是是setq，下面的表达式给变量my-name赋值<span class="string">"Bastien"</span></div><div class="line">(setq my-name <span class="string">"Bastien"</span>)</div><div class="line">;; ^ 把光标停在这里，再键入C-x C-e</div><div class="line"></div><div class="line">;; 下面insert函数的作用是在光标所在出插入字符Hello</div><div class="line">(insert <span class="string">"Hello!"</span>)</div><div class="line">;; ^ 把光标停在这里，再键入C-x C-e</div><div class="line"></div><div class="line">;; insert函数还可以两个常量字符，比如</div><div class="line">(insert <span class="string">"Hello"</span> <span class="string">" world!"</span>)</div><div class="line"></div><div class="line">;; insert函数还可以接受变量作为参数，我们之前已经给my-name变量赋过值了</div><div class="line">;; 所以下面命令的输出结果是 <span class="string">"Hello, I am Bastien"</span></div><div class="line">(insert <span class="string">"Hello, I am "</span> my-name)</div><div class="line"></div><div class="line">;; defun命令用来定义一个函数,语法是</div><div class="line">;; (defun 函数名 (参数列表) (函数体))</div><div class="line">(defun hello () (insert <span class="string">"Hello, I am "</span> my-name))</div><div class="line">;; ^ 把光标停在这里，再键入C-x C-e 执行defun命令来定义函数</div><div class="line">;; 通过defun命令，你已经在Emacs中安装了这个hello函数，这个函数就成为了Emacs的一部分，知道你退出Emacs或者改变hello的定义</div><div class="line"></div><div class="line">;; 从下面开始，我们将不再提醒读者使用C-x C-e来定义函数和执行ELisp指令</div><div class="line"></div><div class="line">;; 在Elisp中直接输入函数的名称就是调用该函数。</div><div class="line">;; 下面的命令的输入结果是: Hello, I am Bastien</div><div class="line">(hello)</div><div class="line"></div><div class="line">;; 前面定义的hello函数不接受任何参数,过于简单，</div><div class="line">;; 现在我们重新定义hello函数，让它接受一个参数name。 </div><div class="line">(defun hello (name) (insert <span class="string">"Hello "</span> name))</div><div class="line"></div><div class="line">;; 然后调用新的hello函数，并且提供一个参数。</div><div class="line">;; 下面命令的输出结果是<span class="string">"Hello you"</span></div><div class="line">(hello <span class="string">"you"</span>)</div><div class="line"></div><div class="line">== progn,let和交互式函数== </div><div class="line">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</div><div class="line">;;</div><div class="line">;; 执行switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window命令，将在在一个新的窗口中打开一个<span class="keyword">buffer</span></div><div class="line">;; 该<span class="keyword">buffer</span>命名叫做 test, 并且把光标移到新的<span class="keyword">buffer</span>的窗口中。</div><div class="line">(switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line"></div><div class="line">;; 要回到原来的<span class="keyword">buffer</span>中，可以使用鼠标点击原来的<span class="keyword">buffer</span></div><div class="line">;; 或者使用组合键 C-x o </div><div class="line">;; C-x o的意思是: 先按下Ctrl-x 再按下o</div><div class="line"></div><div class="line">;; 如果要执行一系列的指令，可以使用流程函数progn，把函数命令连接起来.</div><div class="line">;; 下面的命令,先打开一个新的<span class="keyword">buffer</span>,再执行hello函数，该hello函数的参数是<span class="string">"you"</span></div><div class="line">(progn</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (hello <span class="string">"you"</span>))</div><div class="line"></div><div class="line">;; 如果要清空一个<span class="keyword">buffer</span>,可以调用erase-<span class="keyword">buffer</span>函数。下面的命令先清空test <span class="keyword">buffer</span>,再调用hello函数做打印</div><div class="line">(progn</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (erase-<span class="keyword">buffer</span>)</div><div class="line">  (hello <span class="string">"there"</span>))</div><div class="line"></div><div class="line">;; 在这一系列的质量后面再添加调用一个other-window函数，这样在hello函数被调用完毕之后</div><div class="line">;; 光标自动回到之前的<span class="keyword">buffer</span>窗口中</div><div class="line">(progn</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (erase-<span class="keyword">buffer</span>)</div><div class="line">  (hello <span class="string">"you"</span>)</div><div class="line">  (other-window <span class="number">1</span>))</div><div class="line"></div><div class="line">;; let函数用来做局部变量的定义 下面的一系列命令中</div><div class="line">;; let函数首先定义local-name变量的值为“you”</div><div class="line">;; 然后接着执行括号中其它的语句块部分，这个功能和progn类似</div><div class="line">(let ((local-name <span class="string">"you"</span>))</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (erase-<span class="keyword">buffer</span>)</div><div class="line">  (hello local-name)</div><div class="line">  (other-window <span class="number">1</span>))</div><div class="line"></div><div class="line">;; format函数可以用做格式化的输出 其中%s表示该s的地方将被之后提供的一个字符串,即visitor替换</div><div class="line">;; \n表示换行</div><div class="line">(format <span class="string">"Hello %s!\n"</span> <span class="string">"visitor"</span>)</div><div class="line"></div><div class="line">;; 现在我们利用format函数来改进之前定义的hello函数</div><div class="line">(defun hello (name)</div><div class="line">  (insert (format <span class="string">"Hello %s!\n"</span> name)))</div><div class="line"></div><div class="line">;; 执行这个函数结果是<span class="string">"Hello you"</span>，并且光标换到下一行</div><div class="line">(hello <span class="string">"you"</span>)</div><div class="line"></div><div class="line">;; 下面我们再设计一个greeting函数，该函数接受一个参数name,</div><div class="line">;; 在函数体的内部又使用了let函数，给一个局部变量your-name赋值</div><div class="line">;; 最后把参数和局部变量格式化的打印出来</div><div class="line">(defun greeting (name)</div><div class="line">  (let ((your-name <span class="string">"Bastien"</span>))</div><div class="line">    (insert (format <span class="string">"Hello %s!\n\nI am %s."</span></div><div class="line">                    name </div><div class="line">                    your-name ; 局部变量</div><div class="line">                    ))))</div><div class="line"></div><div class="line">;; 执行greeting函数，并提供<span class="string">"you"</span>字符串作为参数</div><div class="line">(greeting <span class="string">"you"</span>)</div><div class="line"></div><div class="line">;; read-from-minibuffer函数提供和用户交互的功能，这个函数可以帮助Elisp程序从用户处得到输入</div><div class="line">(read-from-minibuffer <span class="string">"Enter your name: "</span>)</div><div class="line"></div><div class="line">;; 比如如果我们希望greeting函数能够从用户处得到姓名，并且做打印格式化的欢迎信息。</div><div class="line">;; 可以先调用read-from-minibuffer在minibuffer中提示用户输入姓名，</div><div class="line">;; 然后把得到的结果赋给局部变量your-name，</div><div class="line">;; 最后insert函数在当前<span class="keyword">buffer</span>中插入格式化的输出</div><div class="line">(defun greeting (from-name)</div><div class="line">  (let ((your-name (read-from-minibuffer <span class="string">"Enter your name: "</span>)))</div><div class="line">    (insert (format <span class="string">"Hello!\n\nI am %s and you are %s."</span></div><div class="line">                    from-name ; 格式化输出参数<span class="number">1</span></div><div class="line">                    your-name ; 格式化输出参数<span class="number">2</span></div><div class="line">                    ))))</div><div class="line"></div><div class="line">;; 执行这个函数</div><div class="line">(greeting <span class="string">"Bastien"</span>)</div><div class="line"></div><div class="line">;; 再稍加改进greeting 把结果打印在新的<span class="keyword">buffer</span>中</div><div class="line">(defun greeting (from-name)</div><div class="line">  (let ((your-name (read-from-minibuffer <span class="string">"Enter your name: "</span>)))</div><div class="line">    (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">    (erase-<span class="keyword">buffer</span>)</div><div class="line">    (insert (format <span class="string">"Hello %s!\n\nI am %s."</span> your-name from-name))</div><div class="line">    (other-window <span class="number">1</span>)))</div><div class="line"></div><div class="line">;; 执行这个函数</div><div class="line">(greeting <span class="string">"Bastien"</span>)</div><div class="line"></div><div class="line">== 列表和综合实例 ==</div><div class="line"></div><div class="line">;; Lisp中使用括号构造列表，使用setq给变量赋值。</div><div class="line">;; 下面的命令先构造一个列表，再把这个列表赋给list-<span class="keyword">of</span>-names变量</div><div class="line">(setq list-<span class="keyword">of</span>-names '(<span class="string">"Sarah"</span> <span class="string">"Chloe"</span> <span class="string">"Mathilde"</span>))</div><div class="line">;; ^这里的单引号表示这是一个列表</div><div class="line"></div><div class="line">;; 如果想要得到列表中的第一个元素，可以使用car函数</div><div class="line">(car list-<span class="keyword">of</span>-names)</div><div class="line"></div><div class="line">;; 如果想要得到列表中的除第一个元素以外的其它元素，可以使用cdr函数</div><div class="line">(cdr list-<span class="keyword">of</span>-names)</div><div class="line"></div><div class="line">;; 以后push函数可以在列表的头部插入新的元素，所以下面的命令将改变list-<span class="keyword">of</span>-name中元素的个数</div><div class="line">(push <span class="string">"Stephanie"</span> list-<span class="keyword">of</span>-names)</div><div class="line"></div><div class="line">;; mapcar函数对列表中的把列表中的每一个元素分别取出来，赋给hello函数</div><div class="line">(mapcar <span class="attribute">'hello</span> list-<span class="keyword">of</span>-names)</div><div class="line"></div><div class="line">;; 重新定义greeting函数，在一个新的，清空的<span class="keyword">buffer</span>中，对list-<span class="keyword">of</span>-names列表中的每一个元素，调用hello函数</div><div class="line">;; 调用完毕之后，再让光标回到原的<span class="keyword">buffer</span>中</div><div class="line">(defun greeting ()</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (erase-<span class="keyword">buffer</span>)</div><div class="line">  (mapcar <span class="attribute">'hello</span> list-<span class="keyword">of</span>-names)</div><div class="line">  (other-window <span class="number">1</span>))</div><div class="line"></div><div class="line">;;执行这个函数，我们将得到一个名叫test的<span class="keyword">buffer</span>，其中的内容是</div><div class="line">;; Hello Stephanie!</div><div class="line">;; Hello Sarah!</div><div class="line">;; Hello Chloe!</div><div class="line">;; Hello Mathilde!</div><div class="line">;; 暂时先不要关闭这个<span class="keyword">buffer</span>!后面还有用！ </div><div class="line">(greeting)</div><div class="line"></div><div class="line">;; 下面我们对<span class="keyword">buffer</span>做一些更有意思的事情！</div><div class="line">;; 定义一个replace-hello-by-bonjour函数，顾名思义，就是把hello替换成bonjour</div><div class="line">;; 该函数首先把光标移到一个叫做test的<span class="keyword">buffer</span>中</div><div class="line">;; 再把光标移到该<span class="keyword">buffer</span>的开头</div><div class="line">;; 从头开始搜索字符串Hello,并且替换成Bonjour</div><div class="line">;; 结束之后在把光标移会到一开始的<span class="keyword">buffer</span>中。</div><div class="line">(defun replace-hello-by-bonjour ()</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (goto-char (point-min)) ;该函数把光标移到<span class="keyword">buffer</span>的开头</div><div class="line">  (<span class="keyword">while</span> (search-forward <span class="string">"Hello"</span>)</div><div class="line">    (replace-match <span class="string">"Bonjour"</span>))</div><div class="line">  (other-window <span class="number">1</span>))</div><div class="line"></div><div class="line">;; 其中 (search-forward <span class="string">"Hello"</span>) 在当前的<span class="keyword">buffer</span>中做前向搜索</div><div class="line">;; (<span class="keyword">while</span> x y) 当x 的条件满足时执行y指令 ，当x返回nil时，<span class="keyword">while</span>循环结束</div><div class="line"></div><div class="line">;; 执行这个函数 替换test <span class="keyword">buffer</span>中的hello</div><div class="line">(replace-hello-by-bonjour)</div><div class="line"></div><div class="line">;; test <span class="keyword">buffer</span>中的结果如下</div><div class="line">;; Bonjour Stephanie!</div><div class="line">;; Bonjour Sarah!</div><div class="line">;; Bonjour Chloe!</div><div class="line">;; Bonjour Mathilde!</div><div class="line"></div><div class="line">;; 在minibuff中，还会有一条错误信息 <span class="string">"Search failed: Hello"</span>.</div><div class="line">;; 把(search-forward <span class="string">"Hello"</span>)一句换成如下就不会有错误信息了</div><div class="line">;; (search-forward <span class="string">"Hello"</span> nil t)</div><div class="line"></div><div class="line">;; 其中 nil参数表示 搜索的区域不加限制，直到<span class="keyword">buffer</span>结束</div><div class="line">;; 其中t参数指示search-foward函数 跳过错误信息 直接退出</div><div class="line"></div><div class="line">;; 新hello-<span class="keyword">to</span>-bonjour如下：</div><div class="line">(defun hello-<span class="keyword">to</span>-bonjour ()</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (erase-<span class="keyword">buffer</span>)</div><div class="line">  ;; 对list-<span class="keyword">of</span>-names列表中的每个元素 使用hello函数</div><div class="line">  (mapcar <span class="attribute">'hello</span> list-<span class="keyword">of</span>-names)</div><div class="line">  (goto-char (point-min))</div><div class="line">  ;; 搜索Hello替换成Bonjour</div><div class="line">  (<span class="keyword">while</span> (search-forward <span class="string">"Hello"</span> nil t)</div><div class="line">    (replace-match <span class="string">"Bonjour"</span>))</div><div class="line">  (other-window <span class="number">1</span>))</div><div class="line"></div><div class="line">;; 执行这个函数</div><div class="line">(hello-<span class="keyword">to</span>-bonjour)</div><div class="line"></div><div class="line">;; 下面的boldify-names 函数 ，</div><div class="line">;; 首先把光标挪到名叫test的<span class="keyword">buffer</span>的开头，</div><div class="line">;; 然后使用regular expression 搜索 “Bonjour + 其它任何内容” 的pattern，</div><div class="line">;; 然后对找到的字符加粗。 </div><div class="line">(defun boldify-names ()</div><div class="line">  (switch-<span class="keyword">to</span>-<span class="keyword">buffer</span>-other-window <span class="string">"*test*"</span>)</div><div class="line">  (goto-char (point-min))</div><div class="line">  (<span class="keyword">while</span> (re-search-forward <span class="string">"Bonjour \\(.+\\)!"</span> nil t)</div><div class="line">    (add-text-properties (match-beginning <span class="number">1</span>) ;返回匹配模式中，最先匹配的位置</div><div class="line">                         (match-<span class="keyword">end</span> <span class="number">1</span>) ;返回最后匹配的位置</div><div class="line">                         (list <span class="attribute">'face</span> <span class="attribute">'bold</span>)))</div><div class="line">  (other-window <span class="number">1</span>))</div><div class="line"></div><div class="line">;; 执行这个函数 </div><div class="line">(boldify-names)</div><div class="line"></div><div class="line">== 帮助和参考==</div><div class="line"></div><div class="line">;; 在Emacs中我们可以通过如下的方式得到变量和函数的帮助信息</div><div class="line">;; C-h v a-<span class="keyword">variable</span> RET</div><div class="line">;; C-h f a-<span class="keyword">function</span> RET</div><div class="line">;;</div><div class="line">;; 下面的命令将打开整个Emacs Manual</div><div class="line">;;</div><div class="line">;; C-h i m elisp RET</div><div class="line">;;</div><div class="line">;; Emacs Lisp 教程</div><div class="line">;; https://www.gnu.org/software/emacs/manual/html_node/eintr/index.html</div><div class="line"></div><div class="line">;; Thanks <span class="keyword">to</span> these people <span class="keyword">for</span> their feedback <span class="keyword">and</span> suggestions:</div><div class="line">;; - Wes Hardaker</div><div class="line">;; - notbob</div><div class="line">;; - Kevin Montuori</div><div class="line">;; - Arne Babenhauserheide</div><div class="line">;; - Alan Schmitt</div><div class="line">;; - LinXitoW</div><div class="line">;; - Aaron Meurer</div></pre></td></tr></table></figure></p>


		<!-- pagination -->
		<div>
		<center>
		<div class="pagination">
<ul class="pagination">
	
	
	
		
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
			
			
		
	
	    
			
			
			
	    
			
		
	
	    
			
		
	
	    
			
		
	
	    
			
		
	
	    
			
		
	
	    
			
			
		
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	
		<li class="prev"><a data-pjax href="/wiki/elisp-function.html" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
	
	<li><a data-pjax href="/wiki"><i class="fa fa-tasks"></i>Wiki</a></li>
	
		<li class="next"><a data-pjax href="/wiki/elisp-basic.html" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>
	
</ul>
</div>

	    </center>
		</div>
				
		<!-- toc -->
		
   	<script type="text/javascript">
		jQuery(document).ready(function() {
		
 		   generateWikiTOC('.note', '.toc',  2 , 2 );
		
		});
	</script>



				
		<!-- comment -->
		
<section id="comment">
    <h2 class="title">Comments</h2>
	
	 <div id="comment-thread"></div>
	 <div id="loading-spin"></div>
	 <script type="text/javascript">
	   getComments({
		       type: "github",
	           user: "wzpan",
	           repo: "wzpan.github.io",
			   client_id: "1eb35434de75c06a513f",
			   client_secret: "6e4193f8ecd619cdfac2b1aa16b3663fe18d2e90",
			   no_comment: "暂时还没有留言呢，点击下面的按钮去留言吧！",
			   go_to_comment: "去留言",
			   btn_class: "btn btn-primary",
			   no_issue: "no_issue",
			   issue_title: "入门",
			   issue_id: "undefined",
			   comments_target: "#comment-thread" ? "#comment-thread" : "#comment-thread",
			   loading_target: "undefined"
			   });
	 </script>
	
</section>


		

	</div> <!-- span9/span12 -->
</div><!-- row-fluid post-full -->

	</div>	
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2019 Joseph Pan
  
    <small>
     <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img title="知识共享许可协议" style="border-width: 0px; vertical-align: middle; display: inline; " src="/images/license.png"></a>
    </small>
</p>
 </footer>
</div> <!-- container-narrow -->


<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/dist/jquery.imagesloaded.min.js"></script>


<script src="/dist/gallery.min.js"></script>
<script src="/dist/bootstrap.min.js"></script>
<script src="/dist/jquery.tableofcontents.min.js"></script>
<script src="/dist/tocgenerator.min.js"></script>
<script src="/dist/require.min.js"></script>
<script src="/dist/main.min.js"></script>



<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox({
    helpers : { 
        title : { type : 'inside' }
    },
    afterLoad : function() {
        this.title = (this.title ? '' + this.title + '<br />' : '') + 'Image ' + (this.index + 1) + ' of ' + this.group.length;
    }
  });
})(jQuery);
</script>




<!-- syntax highlighting -->

  <script>
  marked.setOptions({
    highlight: function (code, lang) {
        return hljs.highlightAuto(code).value;
    }
  });
  function Highlighting(){
    var markdowns = document.getElementsByClassName('markdown');
    for(var i=0;i<markdowns.length;i++){
        if(markdowns[i].innerHTML) markdowns[i].innerHTML =marked(markdowns[i].innerHTML);
    }
  }
  window.addEventListener('DOMContentLoaded', Highlighting, false);
  window.addEventListener('load', Highlighting, false);
  </script>



<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','ney3Rb77vMaWT2KUKFyt');
</script>





</body>
</html>
