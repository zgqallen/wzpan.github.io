<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>数据类型 | HaHack</title>
  <meta name="author" content="Joseph Pan">
  
  <meta name="description" content="参考资料：

《Go指南》


基本类型
12345678910111213141516171819package mainimport (    &quot;fmt&quot;    &quot;math/cmplx&quot;)var (    ToBe   bool       = false    MaxInt uint64   ">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="数据类型"/>
  <meta property="og:site_name" content="HaHack"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/images/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="HaHack" type="application/atom+xml">
  
  <link rel="stylesheet" href="/dist/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/bootstrap-responsive.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/font-awesome.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/style.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/highlight.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/sidenav.min.css" media="screen" type="text/css">  
  <link rel="stylesheet" href="/dist/responsive.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/bubble.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/google-fonts.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/nprogress.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/dist/comment.min.css" media="screen" type="text/css">
  
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <!--[if lte IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

<!--  -->
<!--     <link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow|PT+Sans:400,400italic,700,700italic|Droid+Serif:400,400italic' rel='stylesheet' type='text/css'> -->
<!--     <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'> -->
<!--  -->
  
<script src="/dist/jquery-2.0.3.min.js"></script>


    <script src="/dist/videoGFW.min.js"></script>
	
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-41569408-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';

var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

	


    <link rel="stylesheet" href="/dist/highlight-default.min.css" media="screen" type="text/css">
    
    <script src="/dist/comment.min.js"></script>
    <script src="/dist/marked.min.js"></script>
    
    <script src="/dist/highlight.min.js"></script>
    <script src="/dist/timeago.min.js"></script>
	<script src="/dist/spin.min.js"></script>


</head>


<body data-spy="scroll" data-target=".toc">  
  <header id="header" class="inner"><div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
            <a data-pjax class="brand" href="/">HaHack</a>
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <div class="nav-collapse collapse">
            <ul class="nav">				
			    
				   <li><a data-pjax href="/archive" title="所有文章归档"><i class="fa fa-archive"></i>Archive</a></li>				   			    			
				   <li><a data-pjax href="/categories" title="所有文章分类"><i class="fa fa-folder"></i>Categories</a></li>				   			    			
				   <li><a data-pjax href="/tags" title="所有文章标签"><i class="fa fa-tags"></i>Tags</a></li>				   			    			
				
				<li class="divider-vertical"></li>
			   	<li><a data-pjax href="/wiki" title="我的笔记库"><i class="fa fa-tasks"></i>wiki</a></li>				   
				
            </ul>			
			<ul class="nav navright">
				<li class="dropdown works">
				<a data-pjax href="#" title="作品集" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-th-large"></i>Works <b class="caret"></b></a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://github.com/wzpan/wukong-robot" title="wukong-robot 是一个简单、灵活、优雅的中文语音对话机器人。"><i class="fa fa-github"></i>wukong-robot</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://hahack.com/codes/dingdang-robot-intro/" title="叮当是一款可以工作在 Raspberry Pi 上的中文语音对话机器人/智能音箱项目。"><i class="fa fa-github"></i>dingdang-robot</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://www.hahack.com/codes/comment-js/" title="纯JS实现的静态站点评论系统，使用 Github/OSChina 作为 backend。"><i class="fa fa-github"></i>comment.js</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://hahack.com/codes/eulerian-video-magnification/" title="首个完整的 C++ 开源实现，能同时放大动作变化和颜色变化"><i class="fa fa-github"></i>QtEVM</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/wzpan/wzpan.github.io/wiki/hexo-series" title="为 Hexo 写的一系列主题/工具/插件"><i class="fa fa-github"></i>hexo-series</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/scnu/scnuthesis" title="符合华南师范大学硕士/博士学位论文格式要求的LaTeX模板。"><i class="fa fa-github"></i>SCNUThesis</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="https://github.com/wzpan/wzpan.github.io/wiki/slides" title="一些幻灯片作品"><i class="fa fa-github"></i>Slides</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" target="_blank" href="http://hahack.com/codes/fcevm/" title="硕士毕业论文"><i class="fa fa-github"></i>Dissertation</a></li>
				
                	        </ul>
				</li>
				<li class="dropdown">
				<a data-pjax href="#" title="订阅本站" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-rss"></i>Subscribe <b class="caret"></b></a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" href="/atom.xml" title="使用 RSS 阅读器订阅 HaHack"><i class="fa fa-rss-square"></i>RSS</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" href="/wechat.html" title="订阅 HaHack 的公众平台"><i class="fa fa-qrcode"></i>WeChat</a></li>
				
				   <li role="presentation"><a role="menuitem" tabindex="-1" href="http://toutiao.io/u/147640" title=""><i class="fa fa-align-justify"></i>Toutiao</a></li>
				
                	        </ul>
				</li>
				
				<li><a data-pjax href="/about" title="关于我"><i class="fa fa-user"></i>About</a></li>				   				
   					  
            </ul>
            </div> <!-- nav-collapse collapse -->
        </div> <!-- container -->
     </div> <!-- navbar-inner -->
</div> <!-- navbar navbar-inverse -->
</header>
  <div class="container" id="container">
  	<div class="content">
    	 

	
		<div class="page-header">		
			<h1> 数据类型</h1>
		</div>    
	



<div class="row-fluid wiki">
	<!-- span -->
    
        <div class="span3 toc"></div>
        <div class="span9 note">
    

	

		<!-- content -->
		<p><div class="alert alert-success"><i class="fa fa-lightbulb-o"></i>  <p>参考资料：</p>
<ul>
<li>《<a href="https://tour.go-zh.org/list" target="_blank" rel="external">Go指南</a>》</li>
</ul>
</div></p>
<h2 id="基本类型">基本类型</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"math/cmplx"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">var</span> (</div><div class="line">    ToBe   <span class="typename">bool</span>       = <span class="constant">false</span></div><div class="line">    MaxInt <span class="typename">uint64</span>     =<span class="number"> 1</span>&lt;<span class="number">&lt;64</span> -<span class="number"> 1</span></div><div class="line">    z      <span class="typename">complex128</span> = cmplx.Sqrt<span class="number">(-5</span> +<span class="number"> 12</span>i)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">const</span> f = <span class="string">"%T(%v)\n"</span></div><div class="line">    fmt.Printf(f, ToBe, ToBe)</div><div class="line">    fmt.Printf(f, MaxInt, MaxInt)</div><div class="line">    fmt.Printf(f, z, z)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>Go 的基本类型有Basic types：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">bool</div><div class="line"></div><div class="line">string</div><div class="line"></div><div class="line">int  int8  int16  int32  int64</div><div class="line">uint uint8 uint16 uint32 uint64 uintptr</div><div class="line"></div><div class="line">byte // uint8 的别名</div><div class="line"></div><div class="line">rune // int32 的别名</div><div class="line">     // 代表一个Unicode码</div><div class="line"></div><div class="line">float32 float64</div><div class="line"></div><div class="line">complex64 complex128</div></pre></td></tr></table></figure></p>
<p>这个例子演示了具有不同类型的变量。同时与导入语句一样，变量的定义“打包”在一个语法块中。</p>
<h2 id="零值">零值</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">var</span> i <span class="typename">int</span></div><div class="line">    <span class="keyword">var</span> f <span class="typename">float64</span></div><div class="line">    <span class="keyword">var</span> b <span class="typename">bool</span></div><div class="line">    <span class="keyword">var</span> s <span class="typename">string</span></div><div class="line">    fmt.Printf(<span class="string">"%v %v %v %q\n"</span>, i, f, b, s)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>变量在定义时没有明确的初始化时会赋值为 零值 。</p>
<p>零值是：</p>
<ul>
<li>数值类型为 0 ；</li>
<li>布尔类型为 false ；</li>
<li>字符串为 “” （空字符串）。</li>
</ul>
<h2 id="类型转换">类型转换</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"math"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">var</span> x, y <span class="typename">int</span> =<span class="number"> 3</span>,<span class="number"> 4</span></div><div class="line">    <span class="keyword">var</span> f <span class="typename">float64</span> = math.Sqrt(<span class="typename">float64</span>(x*x + y*y))</div><div class="line">    <span class="keyword">var</span> z <span class="typename">int</span> = <span class="typename">int</span>(f)</div><div class="line">    fmt.Println(x, y, z)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>表达式 T(v) 将值 v 转换为类型 T 。</p>
<p>一些关于数值的转换：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> i <span class="typename">int</span> =<span class="number"> 42</span></div><div class="line"><span class="keyword">var</span> f <span class="typename">float64</span> = <span class="typename">float64</span>(i)</div><div class="line"><span class="keyword">var</span> u <span class="typename">uint</span> = <span class="typename">uint</span>(f)</div></pre></td></tr></table></figure></p>
<p>或者，更加简单的形式：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">i :=<span class="number"> 42</span></div><div class="line">f := <span class="typename">float64</span>(i)</div><div class="line">u := <span class="typename">uint</span>(f)</div></pre></td></tr></table></figure></p>
<p>与 C 不同的是 Go 的在不同类型之间的项目赋值时<strong>需要显式转换</strong>。试着移除例子中 float64 或 int 的转换看看会发生什么。</p>
<h2 id="类型推导">类型推导</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    v :=<span class="number"> 42</span> <span class="comment">// change me!</span></div><div class="line">    fmt.Printf(<span class="string">"v is of type %T\n"</span>, v)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>在定义一个变量但不指定其类型时（使用没有类型的 var 或 := 语句）， 变量的类型由右值推导得出。</p>
<p>当右值定义了类型时，新变量的类型与其相同：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> i <span class="typename">int</span></div><div class="line">j := i <span class="comment">// j 也是一个 int</span></div></pre></td></tr></table></figure></p>
<p>但是当右边包含了未指名类型的数字常量时，新的变量就可能是 int 、 float64 或 complex128 。 这取决于常量的精度：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">i :=<span class="number"> 42</span>           <span class="comment">// int</span></div><div class="line">f :=<span class="number"> 3.142</span>        <span class="comment">// float64</span></div><div class="line">g :=<span class="number"> 0.867</span> +<span class="number"> 0.5</span>i <span class="comment">// complex128</span></div></pre></td></tr></table></figure></p>
<p>尝试修改演示代码中 v 的初始值，并观察这是如何影响其类型的。</p>
<h2 id="常量">常量</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> pi =<span class="number"> 3.14</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">const</span> world = <span class="string">"世界"</span></div><div class="line">    fmt.<span class="built_in">println</span>(<span class="string">"hello"</span>, world)</div><div class="line">    fmt.<span class="built_in">println</span>(<span class="string">"happy"</span>, pi, <span class="string">"day"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">const</span> truth = <span class="constant">true</span></div><div class="line">    fmt.<span class="built_in">println</span>(<span class="string">"go rules?"</span>, truth)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>常量的定义与变量类似，只不过使用 const 关键字。</p>
<p>常量可以是字符、字符串、布尔或数字类型的值。</p>
<p>常量不能使用 <code>:=</code> 语法定义。</p>
<h2 id="数值常量">数值常量</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> (</div><div class="line">    Big   =<span class="number"> 1</span> &lt;&lt;<span class="number"> 100</span></div><div class="line">    Small = Big &gt;&gt;<span class="number"> 99</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">func</span> needInt(x <span class="typename">int</span>) <span class="typename">int</span> { <span class="keyword">return</span> x<span class="number">*10</span> +<span class="number"> 1</span> }</div><div class="line"><span class="keyword">func</span> needFloat(x <span class="typename">float64</span>) <span class="typename">float64</span> {</div><div class="line">    <span class="keyword">return</span> x *<span class="number"> 0.1</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    fmt.Println(needInt(Small))</div><div class="line">    fmt.Println(needFloat(Small))</div><div class="line">    fmt.Println(needFloat(Big))</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>数值常量是高精度的值。</p>
<p>一个未指定类型的常量由上下文来决定其类型。</p>
<h2 id="指针">指针</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    i, j :=<span class="number"> 42</span>,<span class="number"> 2701</span></div><div class="line"></div><div class="line">    p := &i         <span class="comment">// point to i</span></div><div class="line">    fmt.Println(*p) <span class="comment">// read i through the pointer</span></div><div class="line">    *p =<span class="number"> 21</span>         <span class="comment">// set i through the pointer</span></div><div class="line">    fmt.Println(i)  <span class="comment">// see the new value of i</span></div><div class="line"></div><div class="line">    p = &j         <span class="comment">// point to j</span></div><div class="line">    *p = *p /<span class="number"> 37</span>   <span class="comment">// divide j through the pointer</span></div><div class="line">    fmt.Println(j) <span class="comment">// see the new value of j</span></div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>Go 具有指针。 指针保存了变量的内存地址。</p>
<p>类型 *T 是指向类型 T 的值的指针。其零值是 nil 。</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p *<span class="typename">int</span></div></pre></td></tr></table></figure></p>
<p>&amp; 符号会生成一个指向其作用对象的指针。</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">i :=<span class="number"> 42</span></div><div class="line">p = &i</div></pre></td></tr></table></figure></p>
<p><code>*</code>符号表示指针指向的底层的值。</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fmt.Println(*p) <span class="comment">// 通过指针 p 读取 i</span></div><div class="line">*p =<span class="number"> 21</span>         <span class="comment">// 通过指针 p 设置 i</span></div></pre></td></tr></table></figure></p>
<p>这也就是通常所说的“间接引用”或“非直接引用”。</p>
<p>与 C 不同，<strong>Go 没有指针运算</strong>。</p>
<h2 id="结构体">结构体</h2>
<h3 id="定义">定义</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    X <span class="typename">int</span></div><div class="line">    Y <span class="typename">int</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    fmt.Println(Vertex<span class="number">{1</span>,<span class="number"> 2</span>})</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>一个结构体（ struct ）就是一个字段的集合。</p>
<p>（而 <code>type</code> 的含义跟其字面意思相符。）</p>
<h3 id="结构体字段">结构体字段</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    X <span class="typename">int</span></div><div class="line">    Y <span class="typename">int</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    v := Vertex<span class="number">{1</span>,<span class="number"> 2</span>}</div><div class="line">    v.X =<span class="number"> 4</span></div><div class="line">    fmt.Println(v.X)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>结构体字段使用点号来访问。</p>
<h3 id="结构体指针">结构体指针</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    X <span class="typename">int</span></div><div class="line">    Y <span class="typename">int</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    v := Vertex<span class="number">{1</span>,<span class="number"> 2</span>}</div><div class="line">    p := &v</div><div class="line">    p.X =<span class="number"> 1e9</span></div><div class="line">    fmt.Println(v)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<h3 id="结构体文法">结构体文法</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    X, Y <span class="typename">int</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">var</span> (</div><div class="line">    v1 = Vertex<span class="number">{1</span>,<span class="number"> 2</span>}  <span class="comment">// 类型为 Vertex</span></div><div class="line">    v2 = Vertex{X:<span class="number"> 1</span>}  <span class="comment">// Y:0 被省略</span></div><div class="line">    v3 = Vertex{}      <span class="comment">// X:0 和 Y:0</span></div><div class="line">    p  = &Vertex<span class="number">{1</span>,<span class="number"> 2</span>} <span class="comment">// 类型为 *Vertex</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    fmt.Println(v1, p, v2, v3)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>结构体文法表示通过结构体字段的值作为列表来新分配一个结构体。</p>
<p>使用 <code>Name:</code> 语法可以仅列出部分字段。（字段名的顺序无关。）</p>
<p>特殊的前缀 <code>&amp;</code> 返回一个指向结构体的指针。</p>
<h2 id="数组">数组</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">var</span> a <span class="number">[2</span>]<span class="typename">string</span></div><div class="line">    a<span class="number">[0</span>] = <span class="string">"Hello"</span></div><div class="line">    a<span class="number">[1</span>] = <span class="string">"World"</span></div><div class="line">    fmt.Println(a<span class="number">[0</span>], a<span class="number">[1</span>])</div><div class="line">    fmt.Println(a)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>类型 <code>[n]T</code> 是一个有 <code>n</code> 个类型为 <code>T</code> 的值的数组。</p>
<p>表达式</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a <span class="number">[10</span>]<span class="typename">int</span></div></pre></td></tr></table></figure></p>
<p>定义变量 a 是一个有十个整数的数组。</p>
<p>数组的长度是其类型的一部分，因此<strong>数组不能改变大小</strong>。这看起来是一个制约，但是请不要担心； Go 提供了更加便利的方式来使用数组。</p>
<h2 id="slice">slice</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    s := []<span class="typename">int</span><span class="number">{2</span>,<span class="number"> 3</span>,<span class="number"> 5</span>,<span class="number"> 7</span>,<span class="number"> 11</span>,<span class="number"> 13</span>}</div><div class="line">    fmt.Println(<span class="string">"s =="</span>, s)</div><div class="line"></div><div class="line">    <span class="keyword">for</span> i :=<span class="number"> 0</span>; i &lt; <span class="built_in">len</span>(s); i++ {</div><div class="line">        fmt.Printf(<span class="string">"s[%d] == %d\n"</span>, i, s[i])</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>一个 slice 会指向一个序列的值，并且包含了长度信息。</p>
<p><code>[]T</code> 是一个元素类型为 <code>T</code> 的 slice。</p>
<h3 id="对-slice-切片">对 slice 切片</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    s := []<span class="typename">int</span><span class="number">{2</span>,<span class="number"> 3</span>,<span class="number"> 5</span>,<span class="number"> 7</span>,<span class="number"> 11</span>,<span class="number"> 13</span>}</div><div class="line">    fmt.Println(<span class="string">"s =="</span>, s)</div><div class="line">    fmt.Println(<span class="string">"s[1:4] =="</span>, s<span class="number">[1</span><span class="number">:4</span>])</div><div class="line"></div><div class="line">    <span class="comment">// 省略下标代表从 0 开始</span></div><div class="line">    fmt.Println(<span class="string">"s[:3] =="</span>, s[<span class="number">:3</span>])</div><div class="line"></div><div class="line">    <span class="comment">// 省略上标代表到 len(s) 结束</span></div><div class="line">    fmt.Println(<span class="string">"s[4:] =="</span>, s<span class="number">[4</span>:])</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>slice 可以重新切片，创建一个新的 slice 值指向相同的数组。</p>
<p>表达式</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s[lo:hi]</div></pre></td></tr></table></figure></p>
<p>表示从 lo 到 hi-1 的 slice 元素，含两端。因此</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s[lo:lo]</div></pre></td></tr></table></figure></p>
<p>是空的，而</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s[lo:lo<span class="number">+1</span>]</div></pre></td></tr></table></figure></p>
<p>有一个元素。</p>
<h3 id="构造-slice">构造 slice</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    a := <span class="built_in">make</span>([]<span class="typename">int</span>,<span class="number"> 5</span>)</div><div class="line">    printSlice(<span class="string">"a"</span>, a)</div><div class="line">    b := <span class="built_in">make</span>([]<span class="typename">int</span>,<span class="number"> 0</span>,<span class="number"> 5</span>)</div><div class="line">    printSlice(<span class="string">"b"</span>, b)</div><div class="line">    c := b[<span class="number">:2</span>]</div><div class="line">    printSlice(<span class="string">"c"</span>, c)</div><div class="line">    d := c<span class="number">[2</span><span class="number">:5</span>]</div><div class="line">    printSlice(<span class="string">"d"</span>, d)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> printSlice(s <span class="typename">string</span>, x []<span class="typename">int</span>) {</div><div class="line">    fmt.Printf(<span class="string">"%s len=%d cap=%d %v\n"</span>,</div><div class="line">        s, <span class="built_in">len</span>(x), <span class="built_in">cap</span>(x), x)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>slice 由函数 make 创建。这会分配一个零长度的数组并且返回一个 slice 指向这个数组：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a := <span class="built_in">make</span>([]<span class="typename">int</span>,<span class="number"> 5</span>)  <span class="comment">// len(a)=5</span></div></pre></td></tr></table></figure></p>
<p>为了指定容量，可传递第三个参数到 make：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">b := <span class="built_in">make</span>([]<span class="typename">int</span>,<span class="number"> 0</span>,<span class="number"> 5</span>) <span class="comment">// len(b)=0, cap(b)=5</span></div><div class="line">b = b[:<span class="built_in">cap</span>(b)] <span class="comment">// len(b)=5, cap(b)=5</span></div><div class="line">b = b<span class="number">[1</span>:]      <span class="comment">// len(b)=4, cap(b)=4</span></div></pre></td></tr></table></figure></p>
<h3 id="nil-slice">nil slice</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">var</span> z []<span class="typename">int</span></div><div class="line">    fmt.Println(z, <span class="built_in">len</span>(z), <span class="built_in">cap</span>(z))</div><div class="line">    <span class="keyword">if</span> z == <span class="constant">nil</span> {</div><div class="line">        fmt.Println(<span class="string">"nil!"</span>)</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>slice 的零值是 <code>nil</code> 。</p>
<p>一个 <code>nil</code> 的 slice 的长度和容量是 0。</p>
<h3 id="向-slice-添加元素">向 slice 添加元素</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">var</span> a []<span class="typename">int</span></div><div class="line">    printSlice(<span class="string">"a"</span>, a)</div><div class="line"></div><div class="line">    <span class="comment">// append works on nil slices.</span></div><div class="line">    a = <span class="built_in">append</span>(a,<span class="number"> 0</span>)</div><div class="line">    printSlice(<span class="string">"a"</span>, a)</div><div class="line"></div><div class="line">    <span class="comment">// the slice grows as needed.</span></div><div class="line">    a = <span class="built_in">append</span>(a,<span class="number"> 1</span>)</div><div class="line">    printSlice(<span class="string">"a"</span>, a)</div><div class="line"></div><div class="line">    <span class="comment">// we can add more than one element at a time.</span></div><div class="line">    a = <span class="built_in">append</span>(a,<span class="number"> 2</span>,<span class="number"> 3</span>,<span class="number"> 4</span>)</div><div class="line">    printSlice(<span class="string">"a"</span>, a)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> printSlice(s <span class="typename">string</span>, x []<span class="typename">int</span>) {</div><div class="line">    fmt.Printf(<span class="string">"%s len=%d cap=%d %v\n"</span>,</div><div class="line">        s, <span class="built_in">len</span>(x), <span class="built_in">cap</span>(x), x)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>向 slice 添加元素是一种常见的操作，因此 Go 提供了一个内建函数 <code>append</code> 。 内建函数的文档对 append 有详细介绍。</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">func</span> <span class="built_in">append</span>(s []T, vs ...T) []T</div></pre></td></tr></table></figure></p>
<p>append 的第一个参数 s 是一个类型为 T 的数组，其余类型为 T 的值将会添加到 slice。</p>
<p>append 的结果是一个包含原 slice 所有元素加上新添加的元素的 slice。</p>
<p>如果 s 的底层数组太小，而不能容纳所有值时，会分配一个更大的数组。 返回的 slice 会指向这个新分配的数组。</p>
<h2 id="range">range</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> pow = []<span class="typename">int</span><span class="number">{1</span>,<span class="number"> 2</span>,<span class="number"> 4</span>,<span class="number"> 8</span>,<span class="number"> 16</span>,<span class="number"> 32</span>,<span class="number"> 64</span>,<span class="number"> 128</span>}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> pow {</div><div class="line">        fmt.Printf(<span class="string">"2**%d = %d\n"</span>, i, v)</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p><code>for</code> 循环的 <code>range</code> 格式可以对 slice 或者 map 进行迭代循环。</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    pow := <span class="built_in">make</span>([]<span class="typename">int</span>,<span class="number"> 10</span>)</div><div class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> pow {</div><div class="line">        pow[i] =<span class="number"> 1</span> &lt;&lt; <span class="typename">uint</span>(i)</div><div class="line">    }</div><div class="line">    <span class="keyword">for</span> _, value := <span class="keyword">range</span> pow {</div><div class="line">        fmt.Printf(<span class="string">"%d\n"</span>, value)</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>可以通过赋值给 <code>_</code> 来忽略序号和值。</p>
<p>如果只需要索引值，去掉 <code>, value</code> 的部分即可。</p>
<h2 id="map">map</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    Lat, Long <span class="typename">float64</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">var</span> m <span class="keyword">map</span>[<span class="typename">string</span>]Vertex</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    m = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">string</span>]Vertex)</div><div class="line">    m[<span class="string">"Bell Labs"</span>] = Vertex{</div><div class="line">       <span class="number"> 40.68433</span>,<span class="number"> -74.39967</span>,</div><div class="line">    }</div><div class="line">    fmt.Println(m[<span class="string">"Bell Labs"</span>])</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>map 映射键到值。</p>
<p>map 在使用之前**必须用 make 而不是 new **来创建；值为 nil 的 map 是空的，并且不能赋值。</p>
<h3 id="map-的文法">map 的文法</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    Lat, Long <span class="typename">float64</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">var</span> m = <span class="keyword">map</span>[<span class="typename">string</span>]Vertex{</div><div class="line">    <span class="string">"Bell Labs"</span>: Vertex{</div><div class="line">       <span class="number"> 40.68433</span>,<span class="number"> -74.39967</span>,</div><div class="line">    },</div><div class="line">    <span class="string">"Google"</span>: Vertex{</div><div class="line">       <span class="number"> 37.42202</span>,<span class="number"> -122.08408</span>,</div><div class="line">    },</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    fmt.Println(m)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>map 的文法跟结构体文法相似，不过必须有键名。</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> {</div><div class="line">    Lat, Long <span class="typename">float64</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">var</span> m = <span class="keyword">map</span>[<span class="typename">string</span>]Vertex{</div><div class="line">    <span class="string">"Bell Labs"</span>: <span class="number">{40.68433</span>,<span class="number"> -74.39967</span>},</div><div class="line">    <span class="string">"Google"</span>:    <span class="number">{37.42202</span>,<span class="number"> -122.08408</span>},</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    fmt.Println(m)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>如果顶级的类型只有类型名的话，可以在文法的元素中省略键名。</p>
<h3 id="修改-map">修改 map</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">string</span>]<span class="typename">int</span>)</div><div class="line"></div><div class="line">    m[<span class="string">"Answer"</span>] =<span class="number"> 42</span></div><div class="line">    fmt.Println(<span class="string">"The value:"</span>, m[<span class="string">"Answer"</span>])</div><div class="line"></div><div class="line">    m[<span class="string">"Answer"</span>] =<span class="number"> 48</span></div><div class="line">    fmt.Println(<span class="string">"The value:"</span>, m[<span class="string">"Answer"</span>])</div><div class="line"></div><div class="line">    <span class="built_in">delete</span>(m, <span class="string">"Answer"</span>)</div><div class="line">    fmt.Println(<span class="string">"The value:"</span>, m[<span class="string">"Answer"</span>])</div><div class="line"></div><div class="line">    v, ok := m[<span class="string">"Answer"</span>]</div><div class="line">    fmt.Println(<span class="string">"The value:"</span>, v, <span class="string">"Present?"</span>, ok)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<h4 id="插入或修改元素">插入或修改元素</h4>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m[key] = elem</div></pre></td></tr></table></figure></p>
<h4 id="访问元素">访问元素</h4>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">elem = m[key]</div></pre></td></tr></table></figure></p>
<h4 id="删除元素">删除元素</h4>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">delete</span>(m, key)</div></pre></td></tr></table></figure></p>
<h4 id="检测某个键是否存在">检测某个键是否存在</h4>
<p>通过双赋值检测某个键存在：</p>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">elem, ok = m[key]</div></pre></td></tr></table></figure></p>
<p>如果 key 在 m 中， ok 为 true。否则， ok 为 false，并且 elem 是 map 的元素类型的零值。</p>
<p>同样的，当从 map 中读取某个不存在的键时，结果是 map 的元素类型的零值。</p>
<h2 id="函数值">函数值</h2>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"math"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    hypot := <span class="keyword">func</span>(x, y <span class="typename">float64</span>) <span class="typename">float64</span> {</div><div class="line">        <span class="keyword">return</span> math.Sqrt(x*x + y*y)</div><div class="line">    }</div><div class="line"></div><div class="line">    fmt.Println(hypot<span class="number">(3</span>,<span class="number"> 4</span>))</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>函数也是值。</p>
<h3 id="函数的闭包">函数的闭包</h3>
<p><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></div><div class="line"></div><div class="line"><span class="keyword">func</span> adder() <span class="keyword">func</span>(<span class="typename">int</span>) <span class="typename">int</span> {</div><div class="line">    sum :=<span class="number"> 0</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">func</span>(x <span class="typename">int</span>) <span class="typename">int</span> {</div><div class="line">        sum += x</div><div class="line">        <span class="keyword">return</span> sum</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">func</span> main() {</div><div class="line">    pos, neg := adder(), adder()</div><div class="line">    <span class="keyword">for</span> i :=<span class="number"> 0</span>; i &lt;<span class="number"> 10</span>; i++ {</div><div class="line">        fmt.Println(</div><div class="line">            pos(i),</div><div class="line">            neg<span class="number">(-2</span>*i),</div><div class="line">        )</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>Go 函数可以是闭包的。闭包是一个函数值，它来自函数体的外部的变量引用。函数可以对这个引用值进行访问和赋值；换句话说这个函数被“绑定”在这个变量上。</p>
<p>例如，函数 adder 返回一个闭包。每个闭包都被绑定到其各自的 sum 变量上。</p>
<h2 id="深入阅读">深入阅读</h2>
<ol>
<li><a href="http://blog.go-zh.org/go-slices-usage-and-internals" target="_blank" rel="external">Go 切片：用法和本质</a></li>
</ol>


		<!-- pagination -->
		<div>
		<center>
		<div class="pagination">
<ul class="pagination">
	
	
	
		
	
	    
			
			
		
	
	    
	
	    
			
			
			
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
			
			
		
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
			
			
			
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
			
			
		
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
			
			
			
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
			
		
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	    
	
	
		<li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
	
	<li><a data-pjax href="/wiki"><i class="fa fa-tasks"></i>Wiki</a></li>
	
		<li class="next"><a data-pjax href="/wiki/go-methods.html" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>
	
</ul>
</div>

	    </center>
		</div>
				
		<!-- toc -->
		
   	<script type="text/javascript">
		jQuery(document).ready(function() {
		
 		   generateWikiTOC('.note', '.toc', 2, 2 );
		
		});
	</script>



				
		<!-- comment -->
		
<section id="comment">
    <h2 class="title">Comments</h2>
	
	 <div id="comment-thread"></div>
	 <div id="loading-spin"></div>
	 <script type="text/javascript">
	   getComments({
		       type: "github",
	           user: "wzpan",
	           repo: "wzpan.github.io",
			   client_id: "1eb35434de75c06a513f",
			   client_secret: "6e4193f8ecd619cdfac2b1aa16b3663fe18d2e90",
			   no_comment: "暂时还没有留言呢，点击下面的按钮去留言吧！",
			   go_to_comment: "去留言",
			   btn_class: "btn btn-primary",
			   no_issue: "no_issue",
			   issue_title: "数据类型",
			   issue_id: "undefined",
			   comments_target: "#comment-thread" ? "#comment-thread" : "#comment-thread",
			   loading_target: "undefined"
			   });
	 </script>
	
</section>


		

	</div> <!-- span9/span12 -->
</div><!-- row-fluid post-full -->

	</div>	
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2019 Joseph Pan
  
    <small>
     <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img title="知识共享许可协议" style="border-width: 0px; vertical-align: middle; display: inline; " src="/images/license.png"></a>
    </small>
</p>
 </footer>
</div> <!-- container-narrow -->


<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/dist/jquery.imagesloaded.min.js"></script>


<script src="/dist/gallery.min.js"></script>
<script src="/dist/bootstrap.min.js"></script>
<script src="/dist/jquery.tableofcontents.min.js"></script>
<script src="/dist/tocgenerator.min.js"></script>
<script src="/dist/require.min.js"></script>
<script src="/dist/main.min.js"></script>



<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox({
    helpers : { 
        title : { type : 'inside' }
    },
    afterLoad : function() {
        this.title = (this.title ? '' + this.title + '<br />' : '') + 'Image ' + (this.index + 1) + ' of ' + this.group.length;
    }
  });
})(jQuery);
</script>




<!-- syntax highlighting -->

  <script>
  marked.setOptions({
    highlight: function (code, lang) {
        return hljs.highlightAuto(code).value;
    }
  });
  function Highlighting(){
    var markdowns = document.getElementsByClassName('markdown');
    for(var i=0;i<markdowns.length;i++){
        if(markdowns[i].innerHTML) markdowns[i].innerHTML =marked(markdowns[i].innerHTML);
    }
  }
  window.addEventListener('DOMContentLoaded', Highlighting, false);
  window.addEventListener('load', Highlighting, false);
  </script>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','ney3Rb77vMaWT2KUKFyt');
</script>



</body>
</html>
